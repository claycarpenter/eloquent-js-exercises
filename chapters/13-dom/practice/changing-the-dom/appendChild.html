<!doctype html>
<html>
    <head>
        <style>
            .input-group {
                margin: 1em;   
            }
        </style>
    </head>
<body>
    <p>
        Lorem ipsum all that jazz...
    </p>
    <ol start="0" id="parent">
    </ol>
    
    <div class="input-group">
        <button id="appendChildTrigger">appendChild</button>
    </div>
    
    <div class="input-group">
        <label for="#removeTargetIdx">Remove target idx:</label>
        <input type="text" size="4" id="removeTargetIdx">
        <button id="removeChildTrigger">removeChild</button>
    </div>
    
    <div class="input-group">
        <div>
            <label for="#insertBeforeMovingChildIdx">Moving child idx:</label>
            <input type="text" size="4" id="insertBeforeMovingChildIdx">
        </div>
        <div>
            <label for="#insertBeforeTargetChildIdx">Target child idx:</label>
            <input type="text" size="4" id="insertBeforeTargetChildIdx">
        </div>
        <button id="insertBeforeTrigger">insertBefore</button>
    </div>
    
    <script>
        var appendChildParent = document.getElementById('parent');
        
        function setTriggerHandler(triggerId, handler) {
            var triggerButton = document.getElementById(triggerId);
            
            triggerButton.addEventListener('click', function(event) {
                handler();
            });
        }
        
        function getChildAtIndex(parentElement, childIndex) {
            var childElements = parentElement.getElementsByTagName('*');
            var childElementsArray = Array.prototype.slice.call(childElements, 0);
            
            return childElementsArray[childIndex];
        };
        
        function getInputValue(inputElmntId) {
            var inputElement = document.getElementById(inputElmntId);
            
            if (inputElement) {
                return inputElement.value;
            }
        }
        
        function appendChildTest() {
            var newChildIndex = appendChildParent.getElementsByTagName('*').length;
            
            var newChild = document.createElement('li');
            newChild.textContent = 'Item ' + newChildIndex + ' at ' + new Date();
            
            appendChildParent.appendChild(newChild);
        };
        
        function removeChildTest() {
            var removeChildIndex = Number(getInputValue('removeTargetIdx'));
            
            console.log('Removing child at index', removeChildIndex);
            
            var targetChild = getChildAtIndex(appendChildParent, removeChildIndex);
            
            if (!targetChild) {
                alert('Invalid index for target child.');
                
                return;
            }
            
            appendChildParent.removeChild(targetChild);
        };
        
        function insertBeforeTest() {
            var movingChildIdx = Number(getInputValue('insertBeforeMovingChildIdx'));
            var targetChildIdx = Number(getInputValue('insertBeforeTargetChildIdx'));
            
            var movingChild = getChildAtIndex(appendChildParent, movingChildIdx);
            var targetChild = getChildAtIndex(appendChildParent, targetChildIdx);
            
            appendChildParent.insertBefore(movingChild, targetChild);
        };
        
        // Link appendChild trigger, test.
        setTriggerHandler('appendChildTrigger', appendChildTest);
        
        // Link removeChild trigger, test.
        setTriggerHandler('removeChildTrigger', removeChildTest);
        
        // Link insertBefore trigger, test.
        setTriggerHandler('insertBeforeTrigger', insertBeforeTest);
        
        // Create some test values to start with.
        for (var i = 0; i < 5; i++) {
            appendChildTest();   
        }
    </script>
</body>
</html>
